<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Help - CodePilotAI</title>
    <style>
        html, body {
            margin: 0; padding: 0; font-family: sans-serif;
            background-color: #2b2b2b; color: #d0d0d0; font-size: 14px;
        }
        body { padding: 15px; line-height: 1.6; }
        h1, h2, h3 {
            color: #87ceeb; border-bottom: 1px solid #555;
            padding-bottom: 5px; margin-top: 1.5em; margin-bottom: 0.8em;
        }
        h1 { margin-top: 0.5em; }
        ul, ol { margin-top: 0.5em; margin-bottom: 0.8em; padding-left: 30px; }
        li { margin-bottom: 0.5em; }
        code {
            background-color: #444; color: #ccc; padding: 2px 5px;
            border-radius: 3px; font-family: Consolas, 'Courier New', monospace;
            font-size: 0.95em;
        }
        .shortcut { font-weight: bold; color: #98fb98; }
        a { color: #66d9ef; text-decoration: none; }
        a:hover { text-decoration: underline; }
        .important {
            background-color: rgba(255, 235, 59, 0.1); /* Yellowish background */
            border-left: 4px solid #ffeb3b; /* Yellow bar on the left */
            padding: 10px 15px;
            margin: 1em 0;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>Help - CodePilotAI</h1>

    <h2>Core Features</h2>
    <p>
        <b>CodePilotAI</b> is a versatile assistant for interacting with the Google Gemini artificial intelligence. You can use it in three main ways:
    </p>
    <ol>
        <li><b>Simple Chat:</b> Have a conversation with the AI on any topic, just like a regular chatbot, without analyzing any files.</li>
        <li><b>Project Analysis:</b> Provide the application with access to a codebase (from GitHub or a local folder) so the AI can answer questions based on the context of your project.</li>
        <li><b>File Handling:</b> The program can read and analyze various file formats, such as <code>.py, .js, .html, .css, .json, .md, .txt</code>, and more.</li>
    </ol>

    <h2>First Launch: Setting Up Access Keys</h2>
    <div class="important">
        <p>To run the application, you need at least one access key: the <b>Gemini API Key</b>. If you plan to work with private repositories on GitHub, you will also need a <b>GitHub Personal Access Token</b>.</p>
        <ul>
            <li><b>Gemini API Key:</b> Your key to access Google Gemini models. You can get one for free at <a href="https://makersuite.google.com/app/apikey">Google AI Studio</a>. This key is required for all modes of operation.</li>
            <li><b>GitHub Personal Access Token (PAT):</b> A token for accessing repositories via the GitHub API. It is only needed for analyzing repositories on GitHub (especially private ones). You can create one in your account settings: <a href="https://github.com/settings/tokens">Tokens (classic)</a>. When creating the token, make sure to select the <code>repo</code> scope.</li>
        </ul>
        <p>
            After obtaining the keys, enter them into the corresponding fields in the "Settings" section of the main window and click "Save". The keys will be stored locally in an <code>.env</code> file in the program's folder.
        </p>
    </div>

    <h2>Working with Project Analysis</h2>
    <h3>How It Works</h3>
    <p>When you click the "Analyze" button, CodePilotAI reads your project files and prepares them to be sent to the AI. There are two analysis modes:</p>
    <ul>
        <li><b>RAG Mode (Recommended):</b> This mode is enabled by default (the "Use RAG" checkbox is checked). The program intelligently analyzes files by creating a brief summary for each and splitting the code into logical blocks (chunks). This allows the AI to focus on the most important information and provide more accurate answers.</li>
        <li><b>Full File Mode:</b> If you disable RAG, the program will send the full content of the selected files to the model. This mode can be useful for very small files but has limitations.</li>
    </ul>

    <div class="important">
        <h3>Context Window Limitations</h3>
        <p>Imagine the AI has a "short-term memory" (a context window) of a limited size. If you try to fit a very large project into it all at once, some information may be lost or ignored, leading to less accurate answers. This is why RAG mode is preferred.</p>
        <p><b>Recommendation:</b> For very large projects, try not to analyze the entire repository. Use the "File Extensions" settings to select only the most relevant files for your task, or work with individual folders if your project is local.</p>
    </div>

    <h2>Main Interface Elements</h2>
    <ul>
        <li><b>Projects Panel (Left):</b> A list of recent sessions. It can be collapsed with the <b>‚óÄ</b>/<b>‚ñ∂</b> button. The saved project is loaded into the program by double-clicking.</li>
        <li><b>"GitHub Repository" / "Local Folder" Tabs:</b> Select the source for analysis.</li>
        <li><b>Analyze / Cancel Analysis:</b> Buttons to start and stop the context preparation process.</li>
        <li><b>View Analyzed Files (üëÅÔ∏è):</b> Opens a window where you can see a list of all files and their short AI-generated summaries (only works in RAG mode).</li>
        <li><b>Settings (collapsible panel):</b>
            <ul>
                <li>Fields for entering and saving your access keys.</li>
                <li>Selection of the AI model, token limits, and file extensions.</li>
                <li>The RAG mode toggle switch.</li>
            </ul>
        </li>
        <div class="important">
            <p><strong>Tip:</strong> If you encounter errors related to quotas ("quota exceeded") or temporary model unavailability, try changing the AI model in the settings. For example, switch from a more powerful version (like gemini-1.5-pro) to a faster one (like gemini-1.5-flash) or vice versa. This can sometimes help bypass temporary API-side restrictions.</p>
        </div>
        <li><b>Instructions:</b> A field for system instructions that will influence the AI's behavior in all its responses.</li>
        <li><b>Search in Dialogue:</b> Allows you to quickly find text in the current chat. Hotkeys: <span class="shortcut">F3</span> (Next), <span class="shortcut">Shift+F3</span> (Previous).</li>
        <li><b>Dialogue Window:</b>
            <ul>
                <li>The <code>üõá</code> / <code>üëÅ</code> button to the right of a message allows you to exclude it from the context for subsequent requests, saving the AI's "memory".</li>
            </ul>
        </li>
        <li><b>Request Input Field:</b> Use <span class="shortcut">Ctrl+Enter</span> to quickly send a message.</li>
        <li><b>Send / Cancel:</b> Buttons to send a request to the AI or cancel it during execution.</li>
    </ul>

    <h2>Menu</h2>
    <ul>
        <li><b>File:</b> Standard actions for managing sessions (New, Open, Save, Exit).</li>
        <li><b>View:</b> Allows opening a window with the application logs for diagnostics.</li>
        <li><b>Language:</b> Switch the interface language between English and Russian (requires a restart).</li>
        <li><b>Help:</b> Opens this window and information about the program.</li>
    </ul>
    
    <h2>Sessions</h2>
    <p>
        You can save and load your conversations. A session is a single file with the <code>.cpai</code> extension that stores the entire chat history, settings, and the analyzed project context. This makes it easy to pick up right where you left off.
    </p>
</body>
</html>