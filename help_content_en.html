<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Help - CodePilotAI</title>
    <style>
        html, body {
            margin: 0; padding: 0; font-family: sans-serif;
            background-color: #2b2b2b; color: #d0d0d0; font-size: 14px;
        }
        body { padding: 15px; line-height: 1.6; }
        h1, h2, h3 {
            color: #87ceeb; border-bottom: 1px solid #555;
            padding-bottom: 5px; margin-top: 1.5em; margin-bottom: 0.8em;
        }
        h1 { margin-top: 0.5em; }
        ul, ol { margin-top: 0.5em; margin-bottom: 0.8em; padding-left: 30px; }
        li { margin-bottom: 0.5em; }
        code {
            background-color: #444; color: #ccc; padding: 2px 5px;
            border-radius: 3px; font-family: Consolas, 'Courier New', monospace;
            font-size: 0.95em;
        }
        .shortcut { font-weight: bold; color: #98fb98; }
        a { color: #66d9ef; text-decoration: none; }
        a:hover { text-decoration: underline; }
        .important {
            background-color: rgba(255, 235, 59, 0.1); /* Yellowish background */
            border-left: 4px solid #ffeb3b; /* Yellow left border */
            padding: 10px 15px;
            margin: 1em 0;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>CodePilotAI Help</h1>

    <h2>Key Features</h2>
    <p>
        <b>CodePilotAI</b> is a versatile assistant for interacting with Google Gemini AI. You can use it in three main ways:
    </p>
    <ol>
        <li><b>Simple Chat:</b> Engage in a dialogue with AI on any topic, like a regular chatbot, without analyzing any files.</li>
        <li><b>Project Analysis:</b> Grant the program access to a codebase (from GitHub or a local folder) so that the AI can answer questions based on your project's context.</li>
        <li><b>File Interaction:</b> The program can read and analyze files of various formats, such as <code>.py, .js, .html, .css, .json, .md, .txt</code> and others.</li>
    </ol>

    <h2>First Launch: Setting Up Access Keys</h2>
    <div class="important">
        <p>The program requires at least one access key: <b>Gemini API Key</b>. If you plan to work with private GitHub repositories, you will also need a <b>GitHub Personal Access Token</b>.</p>
        <ul>
            <li><b>Gemini API Key:</b> Your key for accessing Google Gemini models. You can get it for free at <a href="https://makersuite.google.com/app/apikey">Google AI Studio</a>. This key is necessary for all operating modes.</li>
            <li><b>GitHub Personal Access Token (PAT):</b> A token for accessing repositories via the GitHub API. It is only needed for analyzing GitHub repositories (especially private ones). You can create it in your account settings: <a href="https://github.com/settings/tokens">Tokens (classic)</a>. When creating the token, make sure you select the <code>repo</code> scope.</li>
        </ul>
        <p>
            After obtaining the keys, enter them into the corresponding fields in the "Settings" section of the main window and click "Save". The keys will be saved locally to an <code>.env</code> file in the program's folder.
        </p>
    </div>
    
    <h2>Working with Project Analysis</h2>
    <h3>How it works?</h3>
    <p>When you click the "Analyze" button, CodePilotAI reads your project files and prepares them for transfer to the AI. You can choose one of three modes in "Settings":</p>
    <ul>
        <li><b>Full File Mode</b> ("Use RAG" checkbox unchecked): The program transfers the full content of the selected files to the model. Useful for very small projects.</li>
        <li><b>RAG Mode</b> ("Use RAG" checkbox checked, "Semantic Search" unchecked): The program creates brief descriptions (summaries) for each file and breaks the code into logical blocks (chunks). All summaries and all chunks that fit into the context window are sent to the AI context. This is the optimal mode for small and medium-sized projects.</li>
        <li class="important"><b>RAG + Semantic Search Mode</b> (both checkboxes checked, <b>recommended for large projects</b>): This is the most advanced mode. The program also creates summaries and chunks. But when you ask a question, it first finds the most relevant code fragments (chunks) and sends only them to the AI context, accompanied by overviews of all files. This allows for efficient work with very large codebases.</li>
    </ul>

    <div class="important">
        <h3>Context Window Limitations</h3>
        <p>Imagine that the AI has a "short-term memory" (context window) of limited size. If you try to fit too large a project into it entirely, some information may be lost or ignored, leading to less accurate answers. This is why RAG mode is preferred.</p>
        <p><b>Recommendation:</b> For very large projects, try not to analyze the entire repository. Use the "File Extensions" settings to select only the most relevant files for your task, or work with individual folders if your project is local.</p>
    </div>

    <h2>Main Interface Elements</h2>
    <ul>
        <li><b>Projects Panel (left):</b> A list of recent sessions. Collapses with the <b>‚óÄ</b>/<b>‚ñ∂</b> button. A saved project is loaded into the program by double-clicking.</li>
        <li><b>"GitHub Repository" / "Local Folder" Tabs:</b> Select the source for analysis.</li>
        <li><b>Analyze / Cancel Analysis:</b> Buttons to start and stop the context preparation process.</li>
        <li><b>Update (üîÉ icon):</b> Appears for local Git repositories. Allows you to quickly re-analyze only the changed files without processing the entire project.</li>
        <li><b>Analysis Progress Bar:</b> Appears during analysis and shows its current progress.</li>
        <li><b>View Analyzed Files (üëÅÔ∏è):</b> Opens a window where you can see a list of all files and their brief descriptions (summaries) created by the AI (only works in RAG mode).</li>
        <li><b>Settings (collapsible panel):</b>
            <ul>
                <li>Fields for entering and saving access keys.</li>
                <li>AI model selection, token and file extension settings.</li>
                <li>"Use RAG" and "Semantic Search" mode toggles.</li>
            </ul>
        </li>
        <div class="important">
            <p><strong>Tip:</strong> If you encounter errors related to quotas (quota exceeded) or temporary model unavailability, try changing the AI model in the settings. For example, switch from a more powerful version (gemini-1.5-pro) to a faster one (gemini-1.5-flash) or vice versa. Sometimes this helps bypass temporary API limitations.</p>
        </div>
        <li><b>Instructions:</b> A field for system instructions that will influence the AI's behavior in all its responses.</li>
        <li><b>Search in Dialogue:</b> Allows you to quickly find text in the current chat. Hotkeys: <span class="shortcut">F3</span> (Next), <span class="shortcut">Shift+F3</span> (Previous).</li>
        <li><b>Hide/Show All:</b> A button next to the search that allows you to exclude all messages from the API context or bring them back with a single click.</li>
        <li><b>Dialogue Window:</b>
            <ul>
                <li>The <code>üõá</code> / <code>üëÅ</code> button to the right of a message allows you to exclude it from the context for subsequent requests, saving AI "memory".</li>
                <li>The <b>"Save as..."</b> button appears next to code blocks if the AI suggests creating a new file.</li>
                <li><b>System messages</b> (<i>[System]: ...</i>) inform you and the AI about important events, such as a context update.</li>
            </ul>
        </li>
        <li><b>Query Input Field:</b> <span class="shortcut">Ctrl+Enter</span> for quick message sending.</li>
        <li><b>Send / Cancel:</b> Buttons to send a request to the AI or cancel it during execution.</li>
        <li><b>Status Bar (bottom):</b> Displays information about the token limit and contains a <b>network indicator</b> (green - online, red - offline).</li>
    </ul>

    <h2>Menu</h2>
    <ul>
        <li><b>File:</b> Standard actions for managing sessions (New, Open, Save, Exit).</li>
        <li><b>View:</b> Allows you to open the application logs window for diagnostics.</li>
        <li><b>Language:</b> Switches the interface language between Russian and English (requires restart).</li>
        <li><b>Help:</b> Opens this window and information about the program.</li>
    </ul>

    <h2>Sessions</h2>
    <p>
        You can save and load your dialogues. A session is a single file with the <code>.cpai</code> extension that stores the entire chat history, settings, and analyzed project context. This allows you to easily resume work from where you left off.
    </p>
</body>
</html>